<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>20180725-Docker 入门.md</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
html { font-size: 16px; }
body { font-family: "Cascadia Code", "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 30px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 2px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; overflow: hidden; box-sizing: content-box; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(223, 226, 229); margin: 0px; padding: 0px; }
table tr:nth-child(2n), thead { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(223, 226, 229); border-right-color: rgb(223, 226, 229); border-left-color: rgb(223, 226, 229); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(223, 226, 229); margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-lines { padding-left: 4px; }
.code-tooltip { box-shadow: rgba(0, 28, 36, 0.3) 0px 1px 1px 0px; border-top: 1px solid rgb(238, 242, 242); }
.md-fences, code, tt { border: 1px solid rgb(231, 234, 237); background-color: rgb(248, 248, 248); border-radius: 3px; padding: 2px 4px 0px; font-size: 0.9em; }
code { background-color: rgb(243, 244, 244); padding: 0px 2px; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding-top: 8px; padding-bottom: 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { overflow-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
.md-mathjax-midline { background: rgb(250, 250, 250); }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; padding: 2px 0px 0px 4px; font-size: 0.9em; color: inherit; }
.md-tag { color: rgb(167, 167, 167); opacity: 1; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
.html-for-mac .context-menu { --item-hover-bg-color: #E6F0FE; }
#md-notification .btn { border: 0px; }
.dropdown-menu .divider { border-color: rgb(229, 229, 229); }
.ty-preferences .window-content { background-color: rgb(250, 250, 250); }
.ty-preferences .nav-group-item.active { color: white; background: rgb(153, 153, 153); }


</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h2" data-ref="n2"><a class="md-toc-inner" href="#todo">TODO</a></span><span class="md-toc-item md-toc-h2" data-ref="n8"><a class="md-toc-inner" href="#场景说明">场景说明</a></span><span class="md-toc-item md-toc-h2" data-ref="n21"><a class="md-toc-inner" href="#安装docker">安装docker</a></span><span class="md-toc-item md-toc-h2" data-ref="n29"><a class="md-toc-inner" href="#从dockerfile开始">从dockerfile开始</a></span><span class="md-toc-item md-toc-h3" data-ref="n33"><a class="md-toc-inner" href="#问题docker-run-如何执行多个命令比如先npm-i-然后npm-start）">问题：docker run 如何执行多个命令（比如先npm i 然后npm start）</a></span><span class="md-toc-item md-toc-h2" data-ref="n41"><a class="md-toc-inner" href="#名词解释-imagecontainerhost-linux-containers-和-windows-containers">名词解释 ：image，container，host， linux containers 和 windows containers</a></span><span class="md-toc-item md-toc-h2" data-ref="n55"><a class="md-toc-inner" href="#container运行时的输入输出在哪里">container运行时的输入输出在哪里</a></span><span class="md-toc-item md-toc-h2" data-ref="n66"><a class="md-toc-inner" href="#host上的文件如何共享给container">host上的文件如何共享给container</a></span><span class="md-toc-item md-toc-h3" data-ref="n69"><a class="md-toc-inner" href="#windows-10-修改登录密码后无法访问host文件">windows 10 修改登录密码后无法访问host文件</a></span><span class="md-toc-item md-toc-h2" data-ref="n76"><a class="md-toc-inner" href="#host访问container上的某个端口">host访问container上的某个端口</a></span><span class="md-toc-item md-toc-h2" data-ref="n78"><a class="md-toc-inner" href="#ionic-4-app-在docker-container中运行后无法在host上访问">Ionic 4 app 在docker container中运行后，无法在host上访问</a></span><span class="md-toc-item md-toc-h2" data-ref="n85"><a class="md-toc-inner" href="#container里面的app访问host的某个端口">container里面的app访问host的某个端口</a></span><span class="md-toc-item md-toc-h2" data-ref="n90"><a class="md-toc-inner" href="#ionic-4-app在docker-container中执行npm-i报错">Ionic 4 app在docker container中执行npm i报错</a></span><span class="md-toc-item md-toc-h2" data-ref="n103"><a class="md-toc-inner" href="#todohost上改data里面的东西container中的app自动重启">TODO：host上改data里面的东西，container中的app自动重启</a></span><span class="md-toc-item md-toc-h2" data-ref="n115"><a class="md-toc-inner" href="#tododocker-compose的使用">TODO：docker compose的使用</a></span><span class="md-toc-item md-toc-h2" data-ref="n118"><a class="md-toc-inner" href="#问题集">问题集</a></span></p></div><h2><a name="todo" class="md-header-anchor"></a><span>TODO</span></h2><ol start='' ><li><span>angular cli 自动complie和live reload问题。目前ng项目在windows和mac上都没法live reload。</span></li><li><span>docker compose的使用。</span></li></ol><h2><a name="场景说明" class="md-header-anchor"></a><span>场景说明</span></h2><p><span>host机器上安装的node版本是6.10.3。下载了一个ng项目的代码，需要node 8.9+。</span></p><p><span>要求：</span></p><ol start='' ><li><span>不想在host上安装nvm for windows，</span><a href='https://github.com/coreybutler/nvm-windows/issues'><span>太麻烦</span></a><span>。</span></li><li><span>想要方便地切换node版本</span></li><li><span>代码的编辑仍然在host中进行</span></li><li><span>最好能有代码自动compile 和 live reload</span></li></ol><h2><a name="安装docker" class="md-header-anchor"></a><span>安装docker</span></h2><ol start='' ><li><span>Windows 10上很方便:  </span><a href='https://docs.docker.com/docker-for-windows/install/'><span>Install Docker for Windows</span></a></li><li><span>Windows 7 上麻烦一些，需要 </span><a href='https://docs.docker.com/toolbox/overview/'><span>Docker Toolbox </span></a></li></ol><p><span>Windows 10 安装遇到的一个问题：Hardware assisted virtualization and data execution protection must be enabled in the BIOS  ： </span><a href='https://github.com/docker/for-win/issues/412#issuecomment-288118331'><span>Win10 : virtualization enabled but Docker does not see it - will not load · Issue #412 · docker/for-win</span></a></p><h2><a name="从dockerfile开始" class="md-header-anchor"></a><span>从dockerfile开始</span></h2><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">## 指定这个镜像的基础是什么，我们选择了node: 8.9.3这个版本作为基础镜像</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">FROM node:8.9.3</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">##安装node相关依赖</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">RUN \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">npm install yarn -g \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">yarn global add nrm &amp;&amp; \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">nrm use taobao</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">## 创建一个目录</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">RUN mkdir /data</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">## 指定命令运行的目录</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">WORKDIR /data</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><p><span>build image:   </span><code>docker build -t node-8.9.3  .</code>
<span>check the image: </span><code>docker image ls</code>
<span>create a container from the image:   </span><code>docker run -v &quot;D:/GitRepo/codematters.justbeta/angular&quot;:/data -p 4202:4200 node-8.9.3 npm start</code><span> </span>
<span>用</span><code>ctrl+c</code><span>退出cmd，container仍然在后台运行， </span><code>docker container ls</code><span>能看到。</span>
<span>再次连接container获取console输出的信息：</span><code>docker container logs -f CONTAINER_ID</code></p><h3><a name="问题docker-run-如何执行多个命令比如先npm-i-然后npm-start）" class="md-header-anchor"></a><span>问题：docker run 如何执行多个命令（比如先npm i 然后npm start）</span></h3><p><span>docker run 的cmd没法写多个命令，但是在dockerfile中的CMD可以这样写：CMD [&quot;sh&quot;,&quot;-c&quot;,&quot;npm i &amp;&amp; npm start&quot;]</span></p><p><span>这样npm i的包也会保留在host的文件夹中</span>
<span>但是这样效率比较低，每次新建一个container都要重新去npm i（虽然就是第一次要安装，第二次开始就npm i就是检查了）</span></p><p><em><a href='https://www.syncfusion.com/ebooks/docker_succinctly'><span>Docker Succinctly</span></a></em><span>, P24:</span></p><blockquote><p><span>Everything except the final CMD instruction gets executed during the build. When you run a  container from the image, Docker uses the CMD instruction to tell it how to start—in this case by  running the echoserver.sh script. </span></p></blockquote><p><span>可以在先在host上的data文件夹中先npm i，然后在docker run中直接npm start</span></p><h2><a name="名词解释-imagecontainerhost-linux-containers-和-windows-containers" class="md-header-anchor"></a><span>名词解释 ：image，container，host， linux containers 和 windows containers</span></h2><ul><li><a href='https://www.syncfusion.com/ebooks/docker_succinctly'><span>Docker Succinctly</span></a><span> *, P71:</span></li></ul><blockquote><p><span>This is why Docker containers can run so efficiently—they use the underlying operating system  kernel of the host machine so that processes inside the container are actually running on the  host. For a host, running multiple containers is the same as running multiple processes (unlike  virtual machines, for which each VM has its own kernel and a hypervisor running on the host in  order to translate between the virtual kernel and the real kernel). That is why you can’t run Linux containers on Windows or run Windows containers on Linux. A  container using Ubuntu as its base image needs to run on a Linux machine so that when the  container launches an executable, the host is capable of running it. </span></p></blockquote><p><a href='https://www.hanselman.com/blog/DockerAndLinuxContainersOnWindowsWithOrWithoutHyperVVirtualMachines.aspx'><span>Docker and Linux Containers on Windows, with or without Hyper-V Virtual Machines - Scott Hanselman</span></a><span>: </span></p><blockquote><p><img src="20180725-Docker%20%E5%85%A5%E9%97%A8.md.assets/3bfe506b-7f4c-48d4-921d-3a072ef40f28.png" referrerpolicy="no-referrer" alt="img"></p></blockquote><p><span>安装stable版本的docker for windows，在启动时，如果选择的是Linux Container，同时打开Hyper-V Manager，可以看到docker在新建一个叫MobyLinuxVM的虚拟机。</span></p><p><span>windows 10 原生支持container，不需要linux虚拟机了：</span></p><blockquote><p><img src="20180725-Docker%20%E5%85%A5%E9%97%A8.md.assets/cc19a984-1db6-45b9-a96b-0af52e254d06.png" referrerpolicy="no-referrer" alt="img"></p></blockquote><h2><a name="container运行时的输入输出在哪里" class="md-header-anchor"></a><span>container运行时的输入输出在哪里</span></h2><ol start='' ><li><span>输入：container底下是一个linux或者windows，没有gui，只有命令行。所以输入方式就是bash或者powershell</span></li><li><span>输出也是在cmd上：用 </span><code>docker exec -it xxxx bash</code><span>连接后台运行的container的bash</span></li><li><span>如何让重新获取输出？第一次能看见ng的输出，ctrl-c退出之后，再进入bash，ng的输出不见了。</span>
<span>--关闭后再进入获取console输出的信息用</span><code>docker container logs</code><span>命令。</span></li><li><code>docker run</code><span>之后运行</span><code>ctrl+c</code><span>，会停止container吗？</span>
<code>dock er run</code><span>时如果加了</span><code>-t -i</code><span>（必须都加）， </span><code>ctrl+c</code><span>就会停止container。单独加其中一个没事，container还在后台。</span></li></ol><h2><a name="host上的文件如何共享给container" class="md-header-anchor"></a><span>host上的文件如何共享给container</span></h2><p><span>docker run 中 -v 加载host上的目录</span></p><h3><a name="windows-10-修改登录密码后无法访问host文件" class="md-header-anchor"></a><span>windows 10 修改登录密码后无法访问host文件</span></h3><blockquote><p><span>使用如上方法启动一个容器，在虚拟机的/mnt目录下怎么也无法加载D:\docker-data\exchange\下面的文件。但是启动容器的时候正常启动，没有报任何错误，折腾了好一阵。但是昨天我用这个方法是能正常挂载，能正常读取到宿主机的文件的。</span>
<span>后来才发现，是自己昨天最后改了自己电脑的密码，要重新验证才可以正常读取。（不知道是不是docker的一个坑，明明之前验证过的密码已经变动了，执行上面的命令也不要求重新认证，也不报错，坑）</span></p><p><span>使用如下方法先清除验证，打开docker的settings窗口，在如下页面点击reset credentials，再勾选上要挂载的目录所在磁盘，重新输入密码（这里不知道为何非要密码，我的电脑一直都不设置密码，为了用docker特设置了一个）</span><img src="20180725-Docker%20%E5%85%A5%E9%97%A8.md.assets/c2d4a30a-8932-4afb-8dec-7445dca3d27a.png" referrerpolicy="no-referrer" alt="img"></p></blockquote><blockquote><p><span>作者：ap10062kai </span>
<span>来源：CSDN </span>
<span>原文：</span><a href='https://blog.csdn.net/ap10062kai/article/details/79232582' target='_blank' class='url'>https://blog.csdn.net/ap10062kai/article/details/79232582</a><span> </span>
<span>版权声明：本文为博主原创文章，转载请附上博文链接！</span></p></blockquote><h2><a name="host访问container上的某个端口" class="md-header-anchor"></a><span>host访问container上的某个端口</span></h2><p><span>docker run 中-p 进行端口映射</span></p><h2><a name="ionic-4-app-在docker-container中运行后无法在host上访问" class="md-header-anchor"></a><span>Ionic 4 app 在docker container中运行后，无法在host上访问</span></h2><p><span>启动container：</span><img src="20180725-Docker%20%E5%85%A5%E9%97%A8.md.assets/1570525127361.png" referrerpolicy="no-referrer" alt="1570525127361"></p><p><span>这样不行（在host上访问</span><a href='http://127.0.0.1:8105' target='_blank' class='url'>http://127.0.0.1:8105</a><span> 返回的ERR_EMPTY_RESPONSE）：</span></p><p><img src="20180725-Docker%20%E5%85%A5%E9%97%A8.md.assets/1570525058319.png" referrerpolicy="no-referrer" alt="1570525058319"></p><p><span>用</span><code>docker exec -it e22a6 /bin/bash</code><span>连进去，然后</span><code>curl -vvv http://localhost:8100</code><span>，有正确的响应。</span></p><p><span>后来container中改成这样：</span><img src="20180725-Docker%20%E5%85%A5%E9%97%A8.md.assets/1570525091350.png" referrerpolicy="no-referrer" alt="1570525091350"></p><p><span>host中访问</span><a href='http://127.0.0.1:8105' target='_blank' class='url'>http://127.0.0.1:8105</a><span> 返回了正确的结果。</span></p><h2><a name="container里面的app访问host的某个端口" class="md-header-anchor"></a><span>container里面的app访问host的某个端口</span></h2><p><span>比如，api部署在host的12021，而ui部署在container里面，ui需要访问api。</span></p><p><span>注意这里可能是两种情况：</span>
<span>1）请求发生在服务器端，比如 在node里面用request来访问api：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">var url = "http://172.17.0.1:3000"; //不OK，172.17.0.1是用 ip route|awk '/default/ { print $3 }'  获取到的</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">var url = "http://host.docker.internal:3000";  // OK</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">var url = "http://localhost:3000";  // 不OK</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p><span>2）请求发生在浏览器里面，比如一个ng项目，是浏览器里面的js去发送ajax请求访问api。</span>
<span>也是OK的。注意：很有可能api里面设置了跨域的域名限制，如果在-p时host端口和原始端口不同，此时api接收到的是host端口发来的请求，可能会被拒绝。举例：-p 4201:4200。api上之运行来自localhost:4200的范围，当使用localhost:4201时，跨域过不去。</span></p><h2><a name="ionic-4-app在docker-container中执行npm-i报错" class="md-header-anchor"></a><span>Ionic 4 app在docker container中执行npm i报错</span></h2><p><span>ENOENT errors, </span><code>.staging</code><span>之类的错误。</span></p><p><span>一直都没解决。最后是用</span><code>yarn i</code><span>解决的。</span></p><ul><li><a href='https://blog.csdn.net/jia611/article/details/78736719'><span>react-native node解决tar ENOENT: no such file or directory, open &#39;/node_modules/.staging/react-native- - jia611的专栏 - CSDN博客</span></a></li><li><a href='https://blog.csdn.net/u011215669/article/details/82080336'><span>no such file or directory, open &#39;/node_modules/.staging/ - YooHoeh的博客 - CSDN博客</span></a></li><li><a href='https://github.com/npm/npm/issues/13528'><span>ENOENT errors, </span><code>.staging</code><span>? · Issue #13528 · npm/npm</span></a></li><li><a href='https://stackoverflow.com/questions/48384811/npm-enoent-no-such-file-or-directory-error-when-installing-sails-js-dependenc'><span>node.js - NPM &quot;ENOENT: no such file or directory error&quot; when installing Sails.js dependencies with Node 8.9.4 LTS - Stack Overflow</span></a></li></ul><h2><a name="todohost上改data里面的东西container中的app自动重启" class="md-header-anchor"></a><span>TODO：host上改data里面的东西，container中的app自动重启</span></h2><ol start='' ><li><span>用nodemon：照着这里进行配置</span><a href='https://github.com/remy/nodemon#application-isnt-restarting' target='_blank' class='url'>https://github.com/remy/nodemon#application-isnt-restarting</a></li><li><span>ng live reload：还没试成功。</span></li></ol><ul><li><a href='https://github.com/angular/angular-cli/issues/5212'><span>Docker on windows - Automatic rebuild not triggered on save from host · Issue #5212 · angular/angular-cli</span></a></li><li><a href='https://stackoverflow.com/questions/44176922/docker-container-doesnt-reload-angular-app'><span>Docker container doesn&#39;t reload Angular app - Stack Overflow</span></a></li></ul><h2><a name="tododocker-compose的使用" class="md-header-anchor"></a><span>TODO：docker compose的使用</span></h2><p><span>TODO.</span></p><h2><a name="问题集" class="md-header-anchor"></a><span>问题集</span></h2><ul><li><a href='https://github.com/docker/for-win/issues/3385#issuecomment-501931980'><span>Error when mounting host path with Docker for Windows - &quot;Permission Denied&quot; · Issue #3385 · docker/for-win</span></a></li></ul></div>
</body>
</html>